(function(e){function f(c){if(a.facebox.settings.inited)return!0;a.facebox.settings.inited=!0;a(document).trigger("init.facebox");var b=a.facebox.settings;b.loadingImage=b.loading_image||b.loadingImage;b.closeImage=b.close_image||b.closeImage;b.imageTypes=b.image_types||b.imageTypes;b.faceboxHtml=b.facebox_html||b.faceboxHtml;b=a.facebox.settings.imageTypes.join("|");a.facebox.settings.imageTypesRegexp=RegExp("."+b+"$","i");c&&a.extend(a.facebox.settings,c);a("#sbar").after(a.facebox.settings.faceboxHtml);
var d=[new Image,new Image];d[0].src=a.facebox.settings.closeImage;d[1].src=a.facebox.settings.loadingImage;a("#at-facebox").find(".at-fb-b:first, .at-fb-bl, .at-fb-br, .at-fb-tl, .at-fb-tr").each(function(){d.push(new Image);d.slice(-1).src=a(this).css("background-image").replace(/url\((.+)\)/,"$1")});a("#at-facebox .close").click(a.facebox.close);a("#at-facebox .close_image").attr("src",a.facebox.settings.closeImage)}function j(){var a,b;self.pageYOffset?(b=self.pageYOffset,a=self.pageXOffset):
document.documentElement&&document.documentElement.scrollTop?(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(b=document.body.scrollTop,a=document.body.scrollLeft);return[a,b]}function k(){var a;self.innerHeight?a=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&(a=document.body.clientHeight);return a}function g(c,b){if(c.match(/#/)){var d=window.location.href.split("#")[0],
d=c.replace(d,"");a.facebox.reveal(a(d).clone().show(),b)}else c.match(a.facebox.settings.imageTypesRegexp)?fillFaceboxFromImage(c,b):fillFaceboxFromAjax(c,b)}function h(){return!1==a.facebox.settings.overlay||null===a.facebox.settings.opacity}var a=e.lib(),d=e.getResourceURL()+"resources/img/";a.facebox=function(c,b){a.facebox.loading();c.div?g(c.div):a.isFunction(c)?c.call(a):a.facebox.reveal(c,b)};a.extend(a.facebox,{settings:{opacity:0,overlay:!0,loadingImage:d+"loading.gif",closeImage:d+"facebox-close.png",
imageTypes:["png","jpg","jpeg","gif"],direction:"ar"==e.getLanguage()?"rtl":"ltr",closeDirection:"ar"==e.getLanguage()?"ltr":"rlt",textAlign:"ar"==e.getLanguage()?"right":"left",closeTextAlign:"ar"==e.getLanguage()?"left":"right",faceboxHtml:'<div id="at-facebox" style="font-family: Helvetica Neue,Helvetica,Arial,sans-serif; display:none; position: absolute; top:0; left:0; z-index:2147483647; direction:left; text-align:left; width:410px"> <div class="at-popup" style="position:relative;"> <table style="border-collapse:collapse; border:none"> <tbody> <tr> <td class="at-fb-tl" style="background:url('+
d+("ar"==e.getLanguage()?"tr":"tl")+'.png); border:0 none; border-bottom:0; padding:0; height:10px; width:10px; overflow:hidden; padding:0;" /><td class="at-fb-b" style="background:url('+d+'b.png); border:0 none; border-bottom:0; padding:0;" /><td class="at-fb-tr" style="background:url('+d+("ar"==e.getLanguage()?"tl":"tr")+'.png); border:0 none; height10px; width:10px; overflow:hidden ;padding:0;" /> </tr> <tr> <td class="at-fb-b" style="background:url('+d+'b.png); border:0 none; border-bottom:0 ;padding:0;" /> <td class="at-fb-tb-body" style="border-bottom:0; padding:10px; background:#fff; width:370px;"> <div class="at-fb-content"> </div> <div class="at-fb-footer" style="border-top:1px solid #DDDDDD; padding-top:5px; margin-top:10px; direction:rtl; text-align:right"> <a href="#" class="close"> <img src="'+
d+'closelabel.gif" title="close" class="close_image" /> </a> </div> </td> <td class="at-fb-b" style="background:url('+d+'b.png); border:0 none; border-bottom:0; padding:0;" /> </tr> <tr> <td class="at-fb-bl" style="background:url('+d+("ar"==e.getLanguage()?"br":"bl")+'.png); border:0 none; border-bottom:0; padding:0; height:10px; width:10px; overflow:hidden; padding:0;" /><td class="at-fb-b" style="background:url('+d+'b.png); border:0 none; border-bottom:0; padding:0;" /><td class="at-fb-br" style="background:url('+
d+("ar"==e.getLanguage()?"bl":"br")+'.png); border:0 none; border-bottom:0; padding:0; height:10px; width:10px; overflow:hidden; padding:0;" /> </tr> </tbody> </table> </div> </div>'},loading:function(){f();if(1==a("#at-facebox .at-fb-loading").length)return!0;h()||(0==a("facebox_overlay").length&&a("body").append('<div id="facebox_overlay" class="facebox_hide" style="position: fixed;top: 0px;left: 0px;height:100%;width:100%;"></div>'),a("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",
a.facebox.settings.opacity).click(function(){a(document).trigger("close.facebox")}).fadeIn(200));a("#at-facebox .at-fb-content").empty();a("#at-facebox .at-fb-tb-body").children().hide().end().append('<div class="at-fb-loading"><img src="'+a.facebox.settings.loadingImage+'"/></div>');a("#at-facebox").css({top:j()[1]+k()/10,left:385.5,direction:a.facebox.settings.direction,"text-align":a.facebox.settings.textAlign}).show();a(".at-fb-footer").css({direction:a.facebox.settings.closeDirection,"text-align":a.facebox.settings.closeTextAlign}).show();
a(document).bind("keydown.facebox",function(c){27==c.keyCode&&a.facebox.close();return!0});a(document).trigger("at-fb-loading.facebox")},reveal:function(c,b){a(document).trigger("beforeReveal.facebox");b&&a("#facebox .at-fb-content").addClass(b);a("#at-facebox .at-fb-content").append(c);a("#at-facebox .at-fb-loading").remove();a("#at-facebox .at-fb-tb-body").children().fadeIn("normal");a("#at-facebox").css("left",a(window).width()/2-a("#facebox table").width()/2);a(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},
changeFaceboxContent:function(c){a("#at-facebox .at-fb-content").html(c)},close:function(){a(document).trigger("close.facebox");return!1}});a.fn.facebox=function(c){f(c);return this.click(function(){a.facebox.loading(!0);var b=this.rel.match(/facebox\[?\.(\w+)\]?/);b&&(b=b[1]);g(this.href,b);return!1})};a(document).bind("close.facebox",function(){a(document).unbind("keydown.facebox");a("#at-facebox").fadeOut(function(){a("#at-facebox .at-fb-content").removeClass().addClass("at-fb-content");h()||a("#facebox_overlay").fadeOut(200,
function(){a("#facebox_overlay").removeClass("facebox_overlayBG");a("#facebox_overlay").css("z-index","-100");a("#facebox_overlay").remove()});a("#at-facebox .at-fb-loading").remove()})})})(AtKit);