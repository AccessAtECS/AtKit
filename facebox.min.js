(function(c){function e(b){if(a.facebox.settings.inited)return!0;a.facebox.settings.inited=!0;a(document).trigger("init.facebox");h();var d=a.facebox.settings.imageTypes.join("|");a.facebox.settings.imageTypesRegexp=RegExp("."+d+"$","i");b&&a.extend(a.facebox.settings,b);a("#sbar").after(a.facebox.settings.faceboxHtml);var c=[new Image,new Image];c[0].src=a.facebox.settings.closeImage;c[1].src=a.facebox.settings.loadingImage;a("#facebox").find(".b:first, .bl, .br, .tl, .tr").each(function(){c.push(new Image);
c.slice(-1).src=a(this).css("background-image").replace(/url\((.+)\)/,"$1")});a("#facebox .close").click(a.facebox.close);a("#facebox .close_image").attr("src",a.facebox.settings.closeImage)}function i(){var a,d;self.pageYOffset?(d=self.pageYOffset,a=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(d=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(d=document.body.scrollTop,a=document.body.scrollLeft);return[a,d]}function j(){var a;
self.innerHeight?a=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&(a=document.body.clientHeight);return a}function h(){var b=a.facebox.settings;b.loadingImage=b.loading_image||b.loadingImage;b.closeImage=b.close_image||b.closeImage;b.imageTypes=b.image_types||b.imageTypes;b.faceboxHtml=b.facebox_html||b.faceboxHtml}function f(b,d){if(b.match(/#/)){var c=window.location.href.split("#")[0],c=b.replace(c,"");a.facebox.reveal(a(c).clone().show(),
d)}else b.match(a.facebox.settings.imageTypesRegexp)?fillFaceboxFromImage(b,d):fillFaceboxFromAjax(b,d)}function g(){return!1==a.facebox.settings.overlay||null===a.facebox.settings.opacity}function k(){if(!g())return 0==a("facebox_overlay").length&&a("body").append('<div id="facebox_overlay" class="facebox_hide" style="position: fixed;top: 0px;left: 0px;height:100%;width:100%;"></div>'),a("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",a.facebox.settings.opacity).click(function(){a(document).trigger("close.facebox")}).fadeIn(200),
!1}function l(){if(!g())return a("#facebox_overlay").fadeOut(200,function(){a("#facebox_overlay").removeClass("facebox_overlayBG");a("#facebox_overlay").css("z-index","-100");a("#facebox_overlay").remove()}),!1}var a=c.lib(),c=c.getResourceURL()+"/presentation/images/";a.facebox=function(b,c){a.facebox.loading();b.div?f(b.div):a.isFunction(b)?b.call(a):a.facebox.reveal(b,c)};a.extend(a.facebox,{settings:{opacity:0,overlay:!0,loadingImage:c+"loading.gif",closeImage:c+"closelabel.gif",imageTypes:["png",
"jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;position: absolute;top:0;left: 0;z-index:2147483647;text-align: left;width:410px"><div class="popup" style="position: relative;"><table style="border-collapse: collapse;border:none"><tbody><tr><td class="tl" style="background:url('+c+'/tl.png); border: 0 none; border-bottom: 0;padding: 0;height: 10px;width: 10px;overflow: hidden;padding: 0;" /><td class="b" style="background:url('+
c+'/b.png); border: 0 none; border-bottom: 0;padding: 0;" /><td class="tr" style="background:url('+c+'/tr.png); border: 0 none;height: 10px;width: 10px;overflow: hidden;padding: 0;" /></tr><tr><td class="b" style="background:url('+c+'/b.png); border: 0 none; border-bottom: 0;padding: 0;" /><td class="body" style="border-bottom: 0;padding: 10px;background: #fff;width: 370px;"><div class="content"></div><div class="footer" style="border-top: 1px solid #DDDDDD;padding-top: 5px;margin-top: 10px;text-align: right;"><a href="#" class="close"><img src="'+
c+'/closelabel.gif" title="close" class="close_image" /></a></div></td><td class="b" style="background:url('+c+'/b.png); border: 0 none; border-bottom: 0;padding: 0;" /></tr><tr><td class="bl" style="background:url('+c+'/bl.png); border: 0 none; border-bottom: 0;padding: 0;height: 10px;width: 10px;overflow: hidden;padding: 0;" /><td class="b" style="background:url('+c+'/b.png); border: 0 none; border-bottom: 0;padding: 0;" /><td class="br" style="background:url('+
c+'/br.png); border: 0 none; border-bottom: 0;padding: 0;height: 10px;width: 10px;overflow: hidden;padding: 0;" /></tr></tbody></table></div></div>'},loading:function(){e();if(1==a("#facebox .loading").length)return!0;k();a("#facebox .content").empty();a("#facebox .body").children().hide().end().append('<div class="loading"><img src="'+a.facebox.settings.loadingImage+'"/></div>');a("#facebox").css({top:i()[1]+j()/10,left:385.5}).show();a(document).bind("keydown.facebox",
function(b){27==b.keyCode&&a.facebox.close();return!0});a(document).trigger("loading.facebox")},reveal:function(b,c){a(document).trigger("beforeReveal.facebox");c&&a("#facebox .content").addClass(c);a("#facebox .content").append(b);a("#facebox .loading").remove();a("#facebox .body").children().fadeIn("normal");a("#facebox").css("left",a(window).width()/2-a("#facebox table").width()/2);a(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},changeFaceboxContent:function(b){a("#facebox .content").html(b)},
close:function(){a(document).trigger("close.facebox");return!1}});a.fn.facebox=function(b){e(b);return this.click(function(){a.facebox.loading(!0);var b=this.rel.match(/facebox\[?\.(\w+)\]?/);b&&(b=b[1]);f(this.href,b);return!1})};a(document).bind("close.facebox",function(){a(document).unbind("keydown.facebox");a("#facebox").fadeOut(function(){a("#facebox .content").removeClass().addClass("content");l();a("#facebox .loading").remove()})})})(AtKit);